#!/bin/bash
# Prevent pushing directly to main branch

CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
REMOTE_BRANCH=$(git rev-parse --abbrev-ref --symbolic-full-name @{u} 2>/dev/null | cut -d'/' -f2)

# Check if pushing to main
while read local_ref local_sha remote_ref remote_sha; do
    if [ "$remote_ref" = "refs/heads/main" ]; then
        echo "‚ùå ERROR: You cannot push directly to the main branch!"
        echo ""
        echo "Please push to dev branch instead:"
        echo "  git push origin dev"
        echo ""
        echo "Or create a pull request from your branch."
        echo ""
        exit 1
    fi
done

exit 0

